@using NJFairground.Web.Utilities
@{
    ViewBag.Title = "Direction To Fairground | Sussex County Fairgrounds";
    ViewBag.PageId = "map";
    Layout = "~/Views/Shared/_LayoutPage.mobile.cshtml";
}
@section PageScript{
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src='@Url.Content("~/Scripts/gmap3.min.js")'></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#btnSearch').click(function () {
                $('#map-area').width($(document).width() + 'px').height('350px');
                $("#map-area").gmap3({
                    getroute: {
                        options: {
                            origin: $('#origin').val(),//"New Jersey State Fair 37 Plains Road Augusta, NJ 07822", //"48 Pirrama Road, Pyrmont NSW",
                            destination: $('#destination').val(),//"New Jersey State Fair P.O. Box 2456 Branchville, NJ 07826",//"Bondi Beach, NSW",
                            travelMode: google.maps.DirectionsTravelMode.DRIVING
                        },
                        callback: function (results) {
                            if (!results) return;
                            $(this).gmap3({
                                map: {
                                    options: {
                                        zoom: 13,
                                        center: [-33.879, 151.235]
                                    }
                                },
                                directionsrenderer: {
                                    container: $('#direction-area'),
                                    options: {
                                        directions: results
                                    }
                                }
                            });
                        }
                    }
                });
            });

            $('#origin').focus(function () {
                if (this.value == 'Enter your location') {
                    this.value = '';
                }
            });
            $('#origin').blur(function () {
                if(this.value == '')
                    this.value = 'Enter your location';
            });
        });
    </script>
}

<h2 class="title">Directions to Fairgrounds</h2>
<div class="ui-grid-solo inner-page">
    <div style="float: left; width: 70%;">
        @*@Html.TextBox("origin", "", new { style = "width:90%;" })*@@*"New Jersey State Fair P.O. Box 2456 Branchville, NJ 07826"*@
        @Html.TextArea("origin", "Enter your location", new { style = "width:90%;" })
    </div>
    <div>
        <img id="btnSearch" style="width:35px;cursor:pointer;"  src='@Url.Content(string.Format("{0}{1}", CommonUtility.GetAppSetting<string>("UploadFolderItemImagePath"), "search.png"))' alt="">
    </div>
    <div id="map-area"></div>
    <div id="direction-area"></div>
</div>
@Html.Hidden("destination", CommonUtility.GetAppSetting<string>("FairGroundAddress"))