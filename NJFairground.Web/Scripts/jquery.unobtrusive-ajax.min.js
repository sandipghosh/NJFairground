/*!
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(n){function r(n,t){for(var i=window,r=(n||"").split(".");i&&r.length;)i=i[r.shift()];return typeof i=="function"?i:(t.push(n),Function.constructor.apply(null,t))}function f(n){return n==="GET"||n==="POST"}function s(n,t){f(t)||n.setRequestHeader("X-HTTP-Method-Override",t)}function h(t,i,r){var u;r.indexOf("application/x-javascript")===-1&&(u=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),n(t.getAttribute("data-ajax-update")).each(function(t,r){var f;switch(u){case"BEFORE":f=r.firstChild;n("<div />").html(i).contents().each(function(){r.insertBefore(this,f)});break;case"AFTER":n("<div />").html(i).contents().each(function(){r.appendChild(this)});break;case"REPLACE-WITH":n(r).replaceWith(i);break;default:n(r).html(i)}}))}function e(t,u){var o,c,e,l;(o=t.getAttribute("data-ajax-confirm"),!o||window.confirm(o))&&(c=n(t.getAttribute("data-ajax-loading")),l=parseInt(t.getAttribute("data-ajax-loading-duration"),10)||0,n.extend(u,{type:t.getAttribute("data-ajax-method")||undefined,url:t.getAttribute("data-ajax-url")||undefined,cache:!!t.getAttribute("data-ajax-cache"),beforeSend:function(u){i+=1;n(document).css("cursor","wait !important");n("#dataloading").slideToggle();var f;return s(u,e),f=r(t.getAttribute("data-ajax-begin"),["xhr","data"]).apply(t,arguments),f!==!1&&c.show(l),f},complete:function(){c.hide(l);r(t.getAttribute("data-ajax-complete"),["xhr","status"]).apply(t,arguments);i>1?i-=1:(i=0,n("#dataloading").slideToggle());n(document).css("cursor","default !important")},success:function(n,i,u){h(t,n,u.getResponseHeader("Content-Type")||"text/html");r(t.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(t,arguments)},error:function(){r(t.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(t,arguments)}}),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),e=u.type.toUpperCase(),f(e)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:e})),n.ajax(u))}function c(t){var i=n(t).data(o);return!i||!i.validate||i.validate()}var i=0,t="unobtrusiveAjaxClick",u="unobtrusiveAjaxClickTarget",o="unobtrusiveValidation";n(document).on("click","a[data-ajax=true]",function(n){n.preventDefault();e(this,{url:this.href,type:"GET",data:[]})});n(document).on("click","form[data-ajax=true] input[type=image]",function(i){var r=i.target.name,u=n(i.target),f=n(u.parents("form")[0]),e=u.offset();f.data(t,[{name:r+".x",value:Math.round(i.pageX-e.left)},{name:r+".y",value:Math.round(i.pageY-e.top)}]);setTimeout(function(){f.removeData(t)},0)});n(document).on("click","form[data-ajax=true] :submit",function(i){var f=i.currentTarget.name,e=n(i.target),r=n(e.parents("form")[0]);r.data(t,f?[{name:f,value:i.currentTarget.value}]:[]);r.data(u,e);setTimeout(function(){r.removeData(t);r.removeData(u)},0)});n(document).on("submit","form[data-ajax=true]",function(i){var f=n(this).data(t)||[],r=n(this).data(u),o=r&&r.hasClass("cancel");(i.preventDefault(),o||c(this))&&e(this,{url:this.action,type:this.method||"GET",data:f.concat(n(this).serializeArray())})})})(jQuery);
//# sourceMappingURL=jquery.unobtrusive-ajax.min.js.map
